---
title: "动态库链接方式"
subtitle: ""
layout: post
author: "Tidcl"
header-style: text
hidden: false
plchart: true
tags:
  - c++
  - linux
---



### 函数重载、多态：

extern "C" 表示使用c的方式编译该函数，编译时不对函数名添加额外字符，因此也不支持重载（重载表示两个函数名称相同、但是参数不同）。

函数多态指同一个名字的函数，不同对象有不同的实现（模板设计模式/策略设计模式）。重载指函数名相同但是参数不同。


Windows系统下的目标文件格式是PE格式，linux下gcc编译的目标文件默认是ELF格式。

### 动态链接库再寻找时是有顺序的：
linux系统中，查找动态库路径，编译目标代码时指定的动态库搜索路径（如gcc命令 -L./ -lfun，那么libfun这个动态库只会在当前目录下寻找）；环境变量 LD_LIBRARY_PATH；配置/etc/ld.so.conf指定的动态库搜索路径；默认动态库搜索路径/lib和/usr/lib

### 动态库分显式链接和隐式链接：
显式链接，指在代码中加载dll并且，使用函数形式调用。
隐式链接更为常用，当我们调用一个动态库的函数，导入它的头文件就可以使用该dll拥有的函数，并且添加lib文件，再进行编译。当程序运行时，会去找这个动态库（顺序同上），找到后加载到内存中，并且通过拷贝，将程序中需要的代码和数据段从内存中拷贝过来，作为进程私有的。

### 进程的内存：
代码段、数据段（非0初始化的全局和静态局部变量）BSS（未初始化的全局和静态局部变量）、堆、栈（栈帧ebp esp）